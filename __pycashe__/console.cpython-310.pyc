o

    ï¿½?]c  ï¿½                   @   s`   d Z ddlZdd lm Z  ddlmZ ddlZddlZG ddï¿½ dejï¿½ Z	e
dkr.e	ï¿½ ï¿½ï¿½  dS dS )z6Module for the entry point of the command interpreter.ï¿½    N)ï¿½	BaseModel)ï¿½storagec                   @   st   e Zd ZdZ dZd dï¿½ Zddï¿½ Zddï¿½ Zd	d
ï¿½ Zddï¿½ Z	d
dï¿½ Z
ddï¿½ Zddï¿½ Zddï¿½ Z
ddï¿½ Zddï¿½ Zdd ï¿½ ZdS ) ï¿½HBNBCommandz"Class for the command interpreter.z(hbnb) c                  C   s   | ï¿½ |ï¿½ dS )z,Catch commands if nothing else matches then.N)ï¿½_precmdï¿½ï¿½selfï¿½lineï¿½ r	   ï¿½E/home/ehoneahobed/Projects/python_programming/AirBnB_clone/console.pyï¿½default   s    zHBNBCommand.defaultc           
      C   sï¿½   t ï¿½d|ï¿½}|s
|S |ï¿½dï¿½} |ï¿½d ï¿½}|ï¿½dï¿½}t ï¿½d|ï¿½}|r,|ï¿½dï¿½}|ï¿½d ï¿½}n|}d}d}	|dkrd|rdt ï¿½d	|ï¿½}
|
rL| ï¿½ | ||
ï¿½dï¿½ï¿½  dS t ï¿½d
|ï¿½}|rd|ï¿½dï¿½pZdd |ï¿½d ï¿½pbd }	|d |  d | d |	 }| ï¿½|ï¿½ |S )z.Intercepts commands to test for class.syntax()z^(\w*)\.(\w+)(?:\(([^)]*)\))$ï¿½   ï¿½   ï¿½    z^"([^"]*)"(?:, (.*))?$Fï¿½ ï¿½updatez^({.*})$z^(?:"([^"]*)")?(?:, (.*))?$ï¿½ )ï¿½reï¿½searchï¿½groupï¿½update_dictï¿½onecmd)
r   r   ï¿½matchï¿½	classnameï¿½methodï¿½argsï¿½match_uid_and_argsï¿½ uidï¿½attr_or_dictï¿½attr_and_valueï¿½
match_dictï¿½match_attr_and_valueï¿½commandr	   r	   r
   r      s@    



ï¿½ï¿½ï¿½ï¿½ 
zHBNBCommand._precmdc           
      C   sï¿½   | ï¿½ ddï¿½}tï¿½|ï¿½}|st d ï¿½ dS |tï¿½ï¿½ vrt dï¿½ dS |du r)t dï¿½ dS dï¿½||ï¿½}|tï¿½ï¿½ vr;t dï¿½ dS tï¿½ï¿½ | }|ï¿½	ï¿½ D ]\}}	||v rS|| |	ï¿½}	t
tï¿½ï¿½ | ||	ï¿½  qEtï¿½ï¿½ | ï¿½ï¿½  dS )	z-Helper method for update() with a dictionary.ï¿½'ï¿½"ï¿½** class name missing **ï¿½** class doesn't exist **Nï¿½** instance id missing **ï¿½{}.{}ï¿½** no instance found **)ï¿½replaceï¿½jsonï¿½loadsï¿½printr    ï¿½classesï¿½formatï¿½ allï¿½
attributesï¿½itemsï¿½setattrï¿½save)
r   r   r    ï¿½s_dictï¿½sï¿½dï¿½ keyr0   ï¿½	attributeï¿½valuer	   r	   r
   r   6   s"   
zHBNBCommand.update_dictc                 C   s
   t ï¿½  dS )z'Handles End Of File character.
        T)r,   r   r	   r	   r
   ï¿½do_EOFL   s    zHBNBCommand.do_EOFc                 C   ï¿½   dS )zExits the program.
        Tr	   r   r	   r	   r
   ï¿½do_quitR   ï¿½    zHBNBCommand.do_quitc                 C   r;   )z&Doesn't do anything on ENTER.
        Nr	   )r   r	   r	   r
   ï¿½	emptylineW   r=   zHBNBCommand.emptylinec                   C   sX   |dks|du rt d ï¿½ dS |tï¿½ï¿½ vr t dï¿½ dS tï¿½ï¿½ | ï¿½ }|ï¿½ ï¿½  t |jï¿½ dS )zCreates an instance.
        r   Nr$   r%   )r,   r    r-   r3   ï¿½id) r   r   ï¿½br	   r	   r
   ï¿½	do_create\   s    zHBNBCommand.do_createc                 C   sï¿½   |dks|du rt d ï¿½ dS |ï¿½dï¿½}|d tï¿½ ï¿½ vr!t dï¿½ dS t|ï¿½dk r-t dï¿½ dS d	ï¿½|d |d
 ï¿½} | tï¿½ï¿½ vrCt dï¿½ dS t tï¿½ï¿½ |  ï¿½ dS )z9Prints the string representation of an instance.
        r   Nr$   r   r   r%   r
   r&   r'   r   r(   )r,   ï¿½splitr    r-   ï¿½ lenr.   r/   ï¿½r   r   ï¿½wordsr7   r	   r	   r
   ï¿½do_showh   s    
zHBNBCommand.do_showc                 C   sï¿½   |dks|du rt d ï¿½ dS |ï¿½dï¿½}|d tï¿½ ï¿½ vr!t dï¿½ dS t|ï¿½dk r-t dï¿½ dS d	ï¿½|d |d
 ï¿½} | tï¿½ï¿½ vrCt dï¿½ dS tï¿½ï¿½ | = tï¿½ï¿½  dS )z<Deletes an instance based on the class name and id.
        r   Nr$   r   r   r%   r
   r&   r'   r   r(   )r,   rB   r    r-   rC   r.   r/   r3   rD   r	   r	   r
   ï¿½
do_destroyz   s    

zHBNBCommand.do_destroyc                       sv   |dk r*|ï¿½ dï¿½ï¿½ ï¿½ d  tï¿½ï¿½ vrt dï¿½ dS ï¿½ fddï¿½tï¿½ï¿½ ï¿½ï¿½ D ï¿½}t |ï¿½ dS ddï¿½ tï¿½ï¿½ ï¿½ï¿½ D ï¿½}t |ï¿½ dS )	z;Prints all string representation of all instances.
        r   r   r   r%   c                     s*   g | ]\}}t |ï¿½jï¿½ d  krt|ï¿½ï¿½qS )r   ) ï¿½typeï¿½__name__ï¿½ strï¿½ ï¿½.0r7   ï¿½ objï¿½rE   r	   r
   ï¿½
<listcomp>ï¿½   s    ï¿½z&HBNBCommand.do_all.<locals>.<listcomp>c                  S   s   g | ]\}}t |ï¿½ï¿½qS r	   )rJ   rK   r	   r	   r
   rO   ï¿½   s    N)rB   r    r-   r,   r/   r1   ) r   r   ï¿½lr	   rN   r
   ï¿½do_allï¿½   s    
 zHBNBCommand.do_allc                       s`   |ï¿½ dï¿½ï¿½ ï¿½ d std ï¿½ dS ï¿½ d tï¿½ ï¿½ vrtdï¿½ dS ï¿½ fddï¿½tï¿½ï¿½ D ï¿½}tt|ï¿½ï¿½ dS )z)Counts the instances of a class.
        r   r   r$   r%   c                    s"   g | ]
}|ï¿½ ï¿½ d  d ï¿½r|ï¿½qS )r   ï¿½.)ï¿½
startswith)rL   ï¿½krN   r	   r
   rO   ï¿½   s    
ï¿½ï¿½ï¿½z(HBNBCommand.do_count.<locals>.<listcomp>N)rB   r,   r    r-   r/   rC   ) r   r   ï¿½matchesr	   rN   r
   ï¿½do_countï¿½   s   
 
ï¿½ zHBNBCommand.do_countc                 C   sr  |dks|du rt d ï¿½ dS d}tï¿½||ï¿½} | ï¿½ dï¿½}| ï¿½ dï¿½}| ï¿½ dï¿½}| ï¿½ dï¿½}| s2t d ï¿½ dS |tï¿½ï¿½ vr>t d	ï¿½ dS |du rHt d
ï¿½ dS dï¿½||ï¿½}|tï¿½ï¿½ vrZt dï¿½ dS |sbt d
ï¿½ dS |sjt dï¿½ dS d}	tï¿½d|ï¿½s|d|v ryt}	n	t	}	n|ï¿½
ddï¿½}tï¿½ï¿½ | }
||
v rï¿½|
| |ï¿½}n|	rï¿½z|	|ï¿½}W n	 tyï¿½   Y nw t
tï¿½ï¿½ | ||ï¿½  tï¿½ï¿½ | ï¿½ï¿½  dS )z=Updates an instance by adding or updating attribute.
        r   Nr$   z<^(\S+)(?:\s(\S+)(?:\s(\S+)(?:\s((?:"[^"]*")|(?:(\S)+)))?)?)?r   r
   r   ï¿½   r%   r&   r'   r(   z ** attribute name missing **z** value missing **z^".*"$rR   r#   )r,   r   r   r   r    r-   r.   r/   ï¿½floatï¿½ intr)   r0   ï¿½
ValueErrorr2   r3   )r   r   ï¿½ rexr   r   r    r8   r9   r7   ï¿½castr0   r	   r	   r
   ï¿½	do_updateï¿½   sN    



ï¿½zHBNBCommand.do_updateN)rI   ï¿½
__module__ï¿½__qualname__ï¿½__doc__ï¿½promptr   r   r   r:   r<   r>   rA   rF   rG   rQ   rV   r]   r	   r	   r	   r
   r      s     r   ï¿½__main__)r`   ï¿½ cmdï¿½models.base_modelr   ï¿½modelsr    r   r*   ï¿½ Cmdr   rI   ï¿½cmdloopr	   r	   r	   r
   ï¿½<module>   s     Pï¿½
